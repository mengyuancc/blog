[{"title":"mac安装rz sz","url":"http://mengyuancc.cn/2022/02/10/rzsz/","content":"<h4 id=\"mac安装rz-sz\"><a href=\"#mac安装rz-sz\" class=\"headerlink\" title=\"mac安装rz sz\"></a>mac安装rz sz</h4><ol>\n<li>服务器需要对应安装rzsz</li>\n<li>item2安装rz sz <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install lrzsz</span><br><span class=\"line\">brew list lrzsz //查看安装后的路径</span><br></pre></td></tr></table></figure></li>\n<li>编写启动脚本(/usr/local/bin/)<ul>\n<li>编写接收脚本 iterm2-recv-zmodem.sh，注意 rz 命令的位置，这里是在 /usr/local/Cellar/lrzsz/0.12.20_1/bin/rz 路径下。<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/bash</span><br><span class=\"line\">osascript -e &#x27;tell application &quot;iTerm2&quot; to version&#x27; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; NAME=iTerm2 || NAME=iTerm</span><br><span class=\"line\">if [[ $NAME = &quot;iTerm&quot; ]]; then</span><br><span class=\"line\">        FILE=$(osascript -e &#x27;tell application &quot;iTerm&quot; to activate&#x27; -e &#x27;tell application &quot;iTerm&quot; to set thefile to choose folder with prompt &quot;Choose a folder to place received files in&quot;&#x27; -e &quot;do shell script (\\&quot;echo \\&quot;&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\\&quot;\\&quot;)&quot;)</span><br><span class=\"line\">else</span><br><span class=\"line\">        FILE=$(osascript -e &#x27;tell application &quot;iTerm2&quot; to activate&#x27; -e &#x27;tell application &quot;iTerm2&quot; to set thefile to choose folder with prompt &quot;Choose a folder to place received files in&quot;&#x27; -e &quot;do shell script (\\&quot;echo \\&quot;&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\\&quot;\\&quot;)&quot;)</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ $FILE = &quot;&quot; ]]; then</span><br><span class=\"line\">        echo Cancelled.</span><br><span class=\"line\">        # Send ZModem cancel</span><br><span class=\"line\">        echo -e \\\\x18\\\\x18\\\\x18\\\\x18\\\\x18</span><br><span class=\"line\">        sleep 1</span><br><span class=\"line\">        echo</span><br><span class=\"line\">        echo \\# Cancelled transfer</span><br><span class=\"line\">else</span><br><span class=\"line\">        cd &quot;$FILE&quot;</span><br><span class=\"line\">        /usr/local/Cellar/lrzsz/0.12.20_1/bin/rz -E -e -b --bufsize 4096</span><br><span class=\"line\">        sleep 1</span><br><span class=\"line\">        echo</span><br><span class=\"line\">        echo</span><br><span class=\"line\">        echo \\# Sent \\-\\&gt; $FILE</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure></li>\n<li>编写接脚本 iterm2-send-zmodem.sh，注意 sz 命令的位置，这里是在 /usr/local/Cellar/lrzsz/0.12.20_1/bin/sz 路径下。<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/bash</span><br><span class=\"line\">osascript -e &#x27;tell application &quot;iTerm2&quot; to version&#x27; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; NAME=iTerm2 || NAME=iTerm</span><br><span class=\"line\">if [[ $NAME = &quot;iTerm&quot; ]]; then</span><br><span class=\"line\">        FILE=`osascript -e &#x27;tell application &quot;iTerm&quot; to activate&#x27; -e &#x27;tell application &quot;iTerm&quot; to set thefile to choose file with prompt &quot;Choose a file to send&quot;&#x27; -e &quot;do shell script (\\&quot;echo \\&quot;&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\\&quot;\\&quot;)&quot;`</span><br><span class=\"line\">else</span><br><span class=\"line\">        FILE=`osascript -e &#x27;tell application &quot;iTerm2&quot; to activate&#x27; -e &#x27;tell application &quot;iTerm2&quot; to set thefile to choose file with prompt &quot;Choose a file to send&quot;&#x27; -e &quot;do shell script (\\&quot;echo \\&quot;&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\\&quot;\\&quot;)&quot;`</span><br><span class=\"line\">fi</span><br><span class=\"line\">if [[ $FILE = &quot;&quot; ]]; then</span><br><span class=\"line\">        echo Cancelled.</span><br><span class=\"line\">        # Send ZModem cancel</span><br><span class=\"line\">        echo -e \\\\x18\\\\x18\\\\x18\\\\x18\\\\x18</span><br><span class=\"line\">        sleep 1</span><br><span class=\"line\">        echo</span><br><span class=\"line\">        echo \\# Cancelled transfer</span><br><span class=\"line\">else</span><br><span class=\"line\">        /usr/local/Cellar/lrzsz/0.12.20_1/bin/sz &quot;$FILE&quot; --escape --binary --bufsize 4096</span><br><span class=\"line\">        sleep 1</span><br><span class=\"line\">        echo</span><br><span class=\"line\">        echo \\# Received $FILE</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>设置脚本的可执行权限 <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/bin/</span><br><span class=\"line\">chmod +x iterm2-send-zmodem.sh</span><br><span class=\"line\">chmod +x iterm2-recv-zmodem.sh </span><br></pre></td></tr></table></figure></li>\n<li>设置item2<ul>\n<li>配置项<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Regular expression: \\*\\*B0100</span><br><span class=\"line\">Action: Run Silent Coprocess</span><br><span class=\"line\">Parameters: /usr/local/bin/iterm2-send-zmodem.sh</span><br><span class=\"line\"></span><br><span class=\"line\">Regular expression: \\*\\*B00000000000000</span><br><span class=\"line\">Action: Run Silent Coprocess</span><br><span class=\"line\">Parameters: /usr/local/bin/iterm2-recv-zmodem.sh </span><br></pre></td></tr></table></figure></li>\n<li>步骤<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">command+“,” 组合键打开item2的“Preferences”面板-&gt;Profiles选项卡-&gt;Advanced-&gt;Triggers（点击Edit即可）</span><br><span class=\"line\">勾选了 instant就不需要重启items了，然后就可以愉快的传输文件了</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>执行<br> rz  // 上传<br> sz  文件名  //下载文件</li>\n</ol>\n","categories":["Linux"],"tags":[]},{"title":"向经典致敬-vim","url":"http://mengyuancc.cn/2021/05/10/vim/","content":"<h5 id=\"基础\"><a href=\"#基础\" class=\"headerlink\" title=\"基础\"></a>基础</h5><ol>\n<li>三种模式 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">普通模式 &#x2F;&#x2F;比较多的快捷键操作</span><br><span class=\"line\">插入模式</span><br><span class=\"line\">命令行模式 &#x2F;&#x2F;一些比较多的高级操作 比如同时打开多个文件、窗口操作、执行外部命令</span><br></pre></td></tr></table></figure></li>\n</ol>\n<ol start=\"2\">\n<li><p>普通模式下的一些常用操作</p>\n<ul>\n<li><p>复制粘贴剪贴</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n + yy 复制到粘贴板 y^复制至行首 y$复制至行尾  yw复制一个单词 yG复制至文件尾  </span><br><span class=\"line\">p 粘贴</span><br></pre></td></tr></table></figure></li>\n<li><p>删除一行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dd  删除一行，删除后下面的行会自动补上来 n+dd 删除n行</span><br><span class=\"line\">这里可以延伸一下 n+command 依次执行n此命令</span><br></pre></td></tr></table></figure></li>\n<li><p>删除单个字符</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x 将光标移至字符  按x</span><br></pre></td></tr></table></figure></li>\n<li><p>删除一个单词</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">daw或者dw  dnw 删除n个单词</span><br></pre></td></tr></table></figure></li>\n<li><p>撤销 与重复 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">命令&quot;u&quot; 更简便，它可以撤消上一次的操作 .可以重复上一次的操作</span><br></pre></td></tr></table></figure></li>\n<li><p>移动光标到文件头 文件尾</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gg 移动文件光标到文件首</span><br><span class=\"line\">G 移动到文件尾  n+G移动到相应的行数  ctrl+o可以快速跳转到上次光标所在的位置</span><br></pre></td></tr></table></figure></li>\n<li><p>移动光标到本行的第一个非空字符</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^ 移动光标到本行第一个非空白字符上  </span><br><span class=\"line\"> $ 移动光标到本行最后一个非空白字符 </span><br><span class=\"line\"> 3$ 移动到下面3行的行尾</span><br></pre></td></tr></table></figure></li>\n<li><p>移动光标到行首</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0（数字0）移动到本行第一个字符上   &#x3D;  &lt;HOME&gt; </span><br><span class=\"line\"> w跳转到单词的首字母 </span><br></pre></td></tr></table></figure></li>\n<li><p>快速滚动光标</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ctrl + d 向下滚动半屏   Ctrl + u 向上滚动半屏   Ctrl + f 向下滚动一屏   Ctrl + b 向上滚动一屏</span><br></pre></td></tr></table></figure></li>\n<li><p>查找命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;text　　查找text，按n健查找下一个，按N健查找前一个</span><br><span class=\"line\">?text　　查找text，反向查找，按n健查找下一个，按N健查找前一个</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>命令行模式下的常用操作</p>\n<ul>\n<li>保存退出<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ZZ  和 :wq 作用相同</span><br></pre></td></tr></table></figure></li>\n<li>放弃编辑<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">丢弃所有的修改并退出，用命令&quot;:q!&quot;     用&quot;:e!&quot;命令放弃所有修改并重新载入该文件的原始内容 （慎用）</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h5 id=\"高级\"><a href=\"#高级\" class=\"headerlink\" title=\"高级\"></a>高级</h5><ol>\n<li><p>同时编辑多个文件</p>\n<ul>\n<li>使用参数打开多个文件<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim 1.txt 2.txt</span><br><span class=\"line\">:n &#x2F;&#x2F;切换下一个文件 :n!&#x2F;&#x2F;强制切换下一个文件</span><br></pre></td></tr></table></figure></li>\n<li>进入一个文件 打开另一个文件<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi 1.txt </span><br><span class=\"line\">:e 2.txt &#x2F;&#x2F;打开另一个文件编辑 :e# &#x2F;&#x2F;回退到上一个操作文件</span><br><span class=\"line\">:ls &#x2F;&#x2F;查看操作过的文件 </span><br><span class=\"line\">:b 2.txt &#x2F;&#x2F;直接放弃操作过的文件 进入新的文件</span><br><span class=\"line\">:f 3.txt &#x2F;&#x2F;改变正在编辑的文件名为3.txt</span><br></pre></td></tr></table></figure></li>\n<li>恢复文件<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:ewcover 1.txt</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>可视模式</p>\n<ul>\n<li>进入<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在普通模式下输入 v（小写），进入字符选择模式，就可以移动光标，光标走过的地方就会选取。再次按下v后就会取消选取。  </span><br><span class=\"line\">在普通模式下输入Shift+v（小写），进入行选择模式，按下V之后就会把整行选取，您可以上下移动光标选更多的行，同样，再按一次 Shift+v 就可以取消选取。</span><br><span class=\"line\">在普通模式下输入Ctrl+v（小写），这是区域选择模式，可以进行矩形区域选择，再按一次 Ctrl+v 取消选取。</span><br></pre></td></tr></table></figure></li>\n<li>复制和删除<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在可视模式下输入 d 删除选取区域内容</span><br><span class=\"line\">在可视模式下输入y复制选取区域内容</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>视窗操作</p>\n<ul>\n<li>打开新的vim窗口编辑文件<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim 1.txt   </span><br><span class=\"line\">:new </span><br><span class=\"line\">:vsp 2.txt &#x2F;&#x2F;垂直分屏打开新文件</span><br><span class=\"line\">:sp &#x2F;&#x2F;水平分屏打开新文件</span><br></pre></td></tr></table></figure></li>\n<li>窗口间跳转的快捷键<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">普通模式下Ctrl+w j 移至下面视窗</span><br><span class=\"line\">普通模式下Ctrl+w k 移至上面视窗</span><br><span class=\"line\">普通模式下Ctrl+w h 移至左边视窗</span><br><span class=\"line\">普通模式下Ctrl+w l 移至右边视窗</span><br><span class=\"line\">普通模式下Ctrl+w J 将当前视窗移至下面</span><br><span class=\"line\">普通模式下Ctrl+w K 将当前视窗移至上面</span><br><span class=\"line\">普通模式下Ctrl+w H 将当前视窗移至左边</span><br><span class=\"line\">普通模式下Ctrl+w L 将当前视窗移至右边</span><br><span class=\"line\">普通模式下Ctrl+w - 减小视窗的高度</span><br><span class=\"line\">普通模式下Ctrl+w + 增加视窗的高度</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>创建加密文件</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim -x 1.txt</span><br></pre></td></tr></table></figure></li>\n<li><p>在vim中执行外部命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(1):!ls &#x2F;&#x2F;查看当前目录下所有的文件</span><br><span class=\"line\">(2):!rm 2.txt 删除2.txt</span><br><span class=\"line\">(3):w bak.txt 另存当前编辑的文件为bak.txt</span><br></pre></td></tr></table></figure></li>\n<li><p>查看帮助文档</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(1)命令行模式下 :h shiftwidth</span><br><span class=\"line\">(2)命令行模式下:ver 显示版本和参数</span><br></pre></td></tr></table></figure></li>\n<li><p>参考资料</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;www.cnblogs.com&#x2F;yangjig&#x2F;p&#x2F;6014198.html   &#x2F;&#x2F;博客园</span><br><span class=\"line\">vim实战 &#x2F;&#x2F;实验楼</span><br></pre></td></tr></table></figure></li>\n</ol>\n","categories":["Linux"],"tags":[]},{"title":"我的北漂生活-IT痴汉的现状","url":"http://mengyuancc.cn/2021/04/01/life4/","content":"<p>做IT这一行的，圣斗士很多。外界的普遍说法是这与工作和性格分不开。</p>\n<p>先说说工作。</p>\n<p>这一行以苦著称，起早贪黑是常事。对于一些技术狂人来说，全身心扑到技术上，这比什么都好。这类人有个统称叫极客、屌丝、技术狂和痴汉。对技术的热衷甚过金钱的回报和世俗的眼光，当然也包括女人。所以圣斗士都是这样一类人。之前有一经理就是这样，但是父母对其施加压力，他便走上相亲的不归路。失败的经历还是蛮多的，归根结底，你整天忙忙碌碌的，没有时间陪人家吃饭逛街聊天，这样还怎么处对象？<br>再说说性格。</p>\n<p>做这一行的，闷骚型的大有人在。我不是带着有色眼镜说这类人，我怎么会这样做呢？因为我也是这类人啊。这性格给人的第一印象通常会不太乐观；但是这性格的人是耐人寻味的，举个例子，财神老师刚上《非诚》时就是这样。但是时间长了，优点就会慢慢显露出来。这样的人是典型的慢热性，往往也是挺可爱的。但是，问题就在于，如果错失了最佳的恋爱时机，那么以后你慢慢被人了解的机会就很少了。相亲，通常不会给你这个机会。</p>\n<p>另外还有一点，没准也是更重要的。那就是眼光太高！</p>\n<p>看过屌丝男士了吧。波多老师和明泽老师就是屌丝心中的女神。但你放眼望去，公司或者社会中哪有那么多如此质量的女神啊。</p>\n<p>既然没有那么多，他们会一直等和寻找。因为他们坚信，爱美之心人皆有之。我们都有追求美的权利。</p>\n<p>每天除了讨论这个sprint搞点啥，就是午饭时看看公司的美女。看了还不算，必须要评价一番。</p>\n<p>“此女真白。”</p>\n<p>“是啊，一白遮百丑。”</p>\n<p>“腿不直啊！”</p>\n<p>“这个胸大唉！”</p>\n<p>渐渐的，公司所有女盆友差不多都被评价了一番。不过，这行业人员流动大你也是知道的，他们的娱乐不会就这样消失的，很快有一批新的美女供大家欣赏。</p>\n<p>这还不算完，很多痴汉是那种有着崇高目标和革命情操的，不满足心意的绝对不凑合。这是他们的人生格言：宁缺毋滥！</p>\n<p>但是一旦有了自己的女人，IT痴汉们会对她百依百顺，专一不二。因为很明显，他们的注意力往往还在代码里，设计中，不会太专注其他女性朋友的。</p>\n","categories":["我的北漂生活"],"tags":[]},{"title":"nginx的平滑重启和热部署","url":"http://mengyuancc.cn/2020/10/25/nginx/","content":"<h5 id=\"写在最前\"><a href=\"#写在最前\" class=\"headerlink\" title=\"写在最前\"></a>写在最前</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx是优秀的web服务器，常常位于企业内网的边缘，会承载比较大的流量和并发，但也凭借其独特的设计模型抗下此任，在一些高并发的场景下，经常会被询问，为了避免到时被问的哑口无言，所以还是要深入了解下</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"先了解下nginx的进程模型\"><a href=\"#先了解下nginx的进程模型\" class=\"headerlink\" title=\"先了解下nginx的进程模型\"></a>先了解下nginx的进程模型</h5><ul>\n<li><p>一个master多个worker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">基于进程和线程的特点多进程更加稳定、可靠。nginx使用多进程的模型，即一个master多个worker， master负责管理worker，worker负责接受请求，处理逻辑，返回结果</span><br></pre></td></tr></table></figure></li>\n<li><p>为什么要有多个worker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx使用epoll模型后，希望使用者配置的worker数量和cpu保持一致，尽量进行绑定，可以使用cpu的缓存，多个worker进程之间使用共享内存来通信</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"Master、worker进程之间通过信号进行通信\"><a href=\"#Master、worker进程之间通过信号进行通信\" class=\"headerlink\" title=\"Master、worker进程之间通过信号进行通信\"></a>Master、worker进程之间通过信号进行通信</h5><ul>\n<li><p>使用命令行向nginx发送信号</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -s reload &#x2F;&#x2F;平滑重启</span><br><span class=\"line\">nginx -s stop&#x2F;quit&#x2F;reopen &#x2F;&#x2F;暂停、退出、切割日志</span><br></pre></td></tr></table></figure></li>\n<li><p>或者直接向nginx进程发送信号</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kill -SIGHUP master的pid</span><br><span class=\"line\">kill -SIGTERM worker的pid 单独退出worker</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"平滑重启\"><a href=\"#平滑重启\" class=\"headerlink\" title=\"平滑重启\"></a>平滑重启</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.向master进程发送HUP信号(reload命令)</span><br><span class=\"line\">2.master校验文件语法是否正确</span><br><span class=\"line\">3.master检测是否有新的端口监听，打开新的监听</span><br><span class=\"line\">4.master用新的配置启动新的worker子进程</span><br><span class=\"line\">5.master向旧的worker子进程发送QUIT信号</span><br><span class=\"line\">6.老的worker进程关闭监听句柄，处理完当前连接后结束进程</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"热部署\"><a href=\"#热部署\" class=\"headerlink\" title=\"热部署\"></a>热部署</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 将旧的nginx二进制文件替换成新的nginx注意备份</span><br><span class=\"line\">2. 向master发送USER2信号</span><br><span class=\"line\">3. master进程会修改pid文件名，添加后缀,oldbin</span><br><span class=\"line\">4. master进程会用新的nginx文件启动新的master进程</span><br><span class=\"line\">5. 向老的master进程发送WINCH信号，关闭老的worker进程</span><br><span class=\"line\">6. 回滚：根据pid来区分新旧mater 向新的master发送QUIT,向旧的master发送HUP</span><br></pre></td></tr></table></figure>\n\n\n","categories":["Nginx"],"tags":[]},{"title":"我的北漂生活-职业","url":"http://mengyuancc.cn/2020/08/10/life3/","content":"<p>职业的选择还是很重要的，俗话说男怕入错行，女怕嫁错郎。可见一斑，前几年，别人问我是做什么的，我都会底气十足的给人说，没错，我是做编程的，感觉很有优越感。不过现在我都不敢说，别人问我，我就会像个小媳妇似的欲言又止，不好意思的说，哥，我是搞编程的。别停啊，喝！对面的海燕扯着嗓门喊着，把我的思绪又拉了回来。<br>海燕是我的大学同学，不要看他的名字很娘气，其实他是个汉子，地地道道的纯爷们。当年跟我一道杀到了北京，这个远离故土的地方，开始漂泊的生活，一晃好几年过去了，感觉并没有什么变化，就像眼下的这家烤串店一样，还是那个样子，唯一变化的是他胖了，有点发福的感觉，结了婚，娶了个不算喜欢，也不讨厌的女人，年初给他生了个娃儿，算是后继有人了，完成了父母的心愿。<br>我老是调侃他，你的任务已经完成了，可以坐吃等死了，他好像还不太乐意，一本正经的跟我说，人要为自己而活，不能只为别人。哥们的人生才刚刚开始，别扯犊子，来，喝一个，酒过三巡，畅谈过去，现在，未来。然后又瞎坎了许久才散场，差不多十点了，算算到8号线，正好可以赶上最后一班地铁，九月的天气，不算凉爽，也不算炎热，就像把手放进一盆温水里一样。但是明显可以感觉到昼夜的温差变大了，走过熙熙攘攘的夜市，来来往往的行人，迎面走来，错过，然后又慢慢的消失在夜色里，或行色匆匆，或悠闲畅谈，重新审视了下这坐城，它仿佛并没有在我的记忆里留下什么，没有什么特别值得铭记的，也没有什么可以怀念的。别了海燕，我就一个人往回走着，本来想让他送送，看他喝的七荤八素，我还没开口，他就说，你一个大老爷们，怕啥，送君千里，终须一别。说罢，扬长而去。<br>我也转身朝地铁方向走去，慢慢的往回走。回想起来，这样的聚餐算是形成了一种习惯，每年都会聚两次。平常大家都在忙着生存，不，生活。一不小心竟把实话说了出来，即使是在一个城市，见面的机会还是挺少的。记得刚来北京的时候，海燕为了省点房租，硬生生的和我挤在一个出租屋里，死活不愿出去租房子，现在回忆起来，还是很有意思的。</p>\n","categories":["我的北漂生活"],"tags":[]},{"title":"我的北漂生活-史各庄","url":"http://mengyuancc.cn/2019/12/10/life1/","content":"<p>北京史各庄是一个奇葩的地方,它位于北京地铁昌平线生命科学院站。这是一个紧邻西二旗的地方,与西二旗高端大气的写字楼相比，这里有朴素简陋的民宅自建房，当然也有高耸入云的商业大楼，当你身处其中时，你会忍不住思考，我是进了城，还是出了村，是的，没错，你位于城乡结合部了。</p>\n<p>记得当时我一出昌平线B口就感觉到扑面而来的浓郁画风,这种画风让人难以名状,很难让人描述清楚,不太容易表达。具体场景大概如下，出口处有个40多岁的妇女天天支着摊子，用地沟油炸用亚硝酸盐淬出来的麻辣烫，一般摊位上都会有几个怀揣着大城市梦想的年轻外地少女们，她们用着OPPO A57手机。在北京寒冷的十一月里冻得哆哆嗦嗦，拥挤在摊位上,一边有说有笑地讨论着偶像们或者快乐大本营，脸上的粉底子随着她们的说笑掺杂在寒风中掉落在她们的麻辣烫中。每次从她们身后走过，你都会闻到那种令人难以名状的你一定也曾经闻过的但是却无比难闻的化妆品味道。充满着理想的她们，年轻而又任性。</p>\n<p>再往里走也是非常牛逼,一路过去,你可以看到大型商场，各种”英语培训”,”ktv”,”养生足疗”,”针灸洗浴”,”长城宽带”,”复印彩印”,”xx超市”,”xx地产”,”xx酒店”,”北京xx村民委员会”等等，应有尽有。除此之外,还会时不时看到穿着紧身裤抹着口红的男人，或者两两三三的老女人，每人都牵着不少于三只的狗，在用你使劲听也一定听不懂的口音激烈地探讨着狗狗的日常。那些狗都非常脏，真的非常脏。</p>\n<p>租赁小区的电梯永远都不太正常,倒也不会有什么危险,只是不正常,这是长时间证明归纳得出的结论.比如它到你的楼层了,它会迅速开门,然后,然后,迅速关门.又或者你在电梯里面按层数,然后按关门,它就不动,它思考会儿,然后再动.有时候,如果你在三层按了往下,而正好有个电梯在五层,恰好有人在七层也按了往下,很不幸,它会带着你先上七层,然后再往下.</p>\n<p>当时因为年少无知，再加上初入社会，被xx中介忽悠着租了顶层，记得当时还觉得非常的赚，外送顶层观景大阳台，闲的没事可以上去鸟瞰下周围的景色，大有一种会当凌绝顶，藐视众生的意境，何乐而不为，但当我费力巴劲的搬进去后，兴致冲冲的跑到了顶层时，顿时一万个草泥马掠过心头，四周被高楼挡的严严实实，还有一栋正在建设的商住两用写字楼，它真的很高，非常的高。这房子除了冬凉夏热外，还有很多让我意外的特点，在后来的日子里让我备受煎熬，让我曾经一度想搞个折叠床就睡公司算了，后来因为公司保安大哥的极力阻拦，最终还是放弃了这个想法。</p>\n","categories":["我的北漂生活"],"tags":[]},{"title":"lnmp环境的搭建","url":"http://mengyuancc.cn/2019/10/10/lnmp/","content":"<h5 id=\"第一步：下载nginx-php源码包\"><a href=\"#第一步：下载nginx-php源码包\" class=\"headerlink\" title=\"第一步：下载nginx php源码包\"></a>第一步：下载nginx php源码包</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-7.2.0.tar.gz</span><br><span class=\"line\">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.12.0.tar.gz</span><br><span class=\"line\">ps:也可以到对应的官网上下载自己喜爱的版本</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第二步：编译安装nginx\"><a href=\"#第二步：编译安装nginx\" class=\"headerlink\" title=\"第二步：编译安装nginx\"></a>第二步：编译安装nginx</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;安装依赖</span><br><span class=\"line\">yum install gcc gcc-c++ openssl openssl-devel cyrus-sasl-md5</span><br><span class=\"line\">&#x2F;&#x2F;编译</span><br><span class=\"line\">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --with-http_ssl_module --with-pcre&#x3D;..&#x2F;pcre-8.39 --with-zlib&#x3D;..&#x2F;zlib-1.2.8</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\">&#x2F;&#x2F;加入开机启动</span><br><span class=\"line\">vim &#x2F;etc&#x2F;rc.local</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf &amp;</span><br><span class=\"line\">&#x2F;&#x2F;加入环境变量</span><br><span class=\"line\">vim &#x2F;etc&#x2F;profile</span><br><span class=\"line\">export PATH&#x3D;&quot;$PATH:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin:&quot;</span><br><span class=\"line\">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"第三步：编译安装php、php-fpm\"><a href=\"#第三步：编译安装php、php-fpm\" class=\"headerlink\" title=\"第三步：编译安装php、php-fpm\"></a>第三步：编译安装php、php-fpm</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;编译</span><br><span class=\"line\">  .&#x2F;configure \\</span><br><span class=\"line\">  --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php7.2 \\</span><br><span class=\"line\">  --with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php7.2&#x2F;etc \\</span><br><span class=\"line\">  --enable-fpm \\</span><br><span class=\"line\">  --with-fpm-user&#x3D;nginx \\</span><br><span class=\"line\">  --with-fpm-group&#x3D;nginx \\</span><br><span class=\"line\">  --enable-inline-optimization \\</span><br><span class=\"line\">  --disable-debug \\</span><br><span class=\"line\">  --disable-rpath \\</span><br><span class=\"line\">  --enable-shared \\</span><br><span class=\"line\">  --enable-soap \\</span><br><span class=\"line\">  --with-libxml-dir \\</span><br><span class=\"line\">  --with-xmlrpc \\</span><br><span class=\"line\">  --with-openssl \\</span><br><span class=\"line\">  --with-pcre-regex \\</span><br><span class=\"line\">  --with-sqlite3 \\</span><br><span class=\"line\">  --with-zlib \\</span><br><span class=\"line\">  --enable-bcmath \\</span><br><span class=\"line\">  --with-iconv \\</span><br><span class=\"line\">  --with-bz2 \\</span><br><span class=\"line\">  --enable-calendar \\</span><br><span class=\"line\">  --with-curl \\</span><br><span class=\"line\">  --with-cdb \\</span><br><span class=\"line\">  --enable-dom \\</span><br><span class=\"line\">  --enable-exif \\</span><br><span class=\"line\">  --enable-fileinfo \\</span><br><span class=\"line\">  --enable-filter \\</span><br><span class=\"line\">  --with-pcre-dir \\</span><br><span class=\"line\">  --enable-ftp \\</span><br><span class=\"line\">  --with-gd \\</span><br><span class=\"line\">  --with-openssl-dir \\</span><br><span class=\"line\">  --with-jpeg-dir \\</span><br><span class=\"line\">  --with-png-dir \\</span><br><span class=\"line\">  --with-zlib-dir \\</span><br><span class=\"line\">  --with-freetype-dir \\</span><br><span class=\"line\">  --enable-gd-jis-conv \\</span><br><span class=\"line\">  --with-gettext \\</span><br><span class=\"line\">  --with-gmp \\</span><br><span class=\"line\">  --with-mhash \\</span><br><span class=\"line\">  --enable-json \\</span><br><span class=\"line\">  --enable-mbstring \\</span><br><span class=\"line\">  --enable-mbregex \\</span><br><span class=\"line\">  --enable-mbregex-backtrack \\</span><br><span class=\"line\">  --with-onig \\</span><br><span class=\"line\">  --enable-pdo \\</span><br><span class=\"line\">  --with-mysqli&#x3D;mysqlnd \\</span><br><span class=\"line\">  --with-pdo-mysql&#x3D;mysqlnd \\</span><br><span class=\"line\">  --with-pdo-sqlite \\</span><br><span class=\"line\">  --with-readline \\</span><br><span class=\"line\">  --enable-session \\</span><br><span class=\"line\">  --enable-shmop \\</span><br><span class=\"line\">  --enable-simplexml \\</span><br><span class=\"line\">  --enable-sockets \\</span><br><span class=\"line\">  --enable-sysvmsg \\</span><br><span class=\"line\">  --enable-sysvsem \\</span><br><span class=\"line\">  --enable-sysvshm \\</span><br><span class=\"line\">  --enable-wddx \\</span><br><span class=\"line\">  --with-xsl \\</span><br><span class=\"line\">  --enable-zip \\</span><br><span class=\"line\">  --enable-mysqlnd-compression-support \\</span><br><span class=\"line\">  --with-pear \\</span><br><span class=\"line\">  --enable-opcache</span><br><span class=\"line\">  &#x2F;&#x2F; 安装</span><br><span class=\"line\">\tmake &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第四步：开启pid\"><a href=\"#第四步：开启pid\" class=\"headerlink\" title=\"第四步：开启pid\"></a>第四步：开启pid</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;php7.2&#x2F;etc</span><br><span class=\"line\">cp php-fpm.conf.default php-fpm.conf</span><br><span class=\"line\">vim php-fpm.conf</span><br><span class=\"line\">pid &#x3D; run&#x2F;php-fpm.pid 去掉前面的#</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第五步：更改用户组\"><a href=\"#第五步：更改用户组\" class=\"headerlink\" title=\"第五步：更改用户组\"></a>第五步：更改用户组</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;php7.2&#x2F;etc&#x2F;php-fpm.d</span><br><span class=\"line\">cp www.conf.default www.conf</span><br><span class=\"line\">vim www.conf</span><br><span class=\"line\">user &#x3D; www 加入的用户名</span><br><span class=\"line\">group &#x3D; www 加入的用户组</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第六步-启动php-fpm\"><a href=\"#第六步-启动php-fpm\" class=\"headerlink\" title=\"第六步: 启动php-fpm\"></a>第六步: 启动php-fpm</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;php7.2&#x2F;sbin&#x2F;php-fpm</span><br><span class=\"line\">&#x2F;&#x2F;将php加入环境变量</span><br><span class=\"line\">PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第七步：修改nginx配置、重启nginx\"><a href=\"#第七步：修改nginx配置、重启nginx\" class=\"headerlink\" title=\"第七步：修改nginx配置、重启nginx\"></a>第七步：修改nginx配置、重启nginx</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"第八步安装mysql\"><a href=\"#第八步安装mysql\" class=\"headerlink\" title=\"第八步安装mysql\"></a>第八步安装mysql</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;这个还是借助yum源进行安装吧 编译安装实在是太慢</span><br></pre></td></tr></table></figure>","categories":["Lnmp"],"tags":[]},{"title":"高并发解决方案","url":"http://mengyuancc.cn/2019/08/14/mutil/","content":"<ol>\n<li><p>相关的概念</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QPS </span><br><span class=\"line\">pv&#x2F;uv</span><br><span class=\"line\">压力测试</span><br><span class=\"line\">    测试能承受的最大并发数</span><br><span class=\"line\">    测试承受的最大QPS值</span><br><span class=\"line\">压测工具</span><br><span class=\"line\">    ab(apache benchmark)、wrk、WebBench</span><br><span class=\"line\">    命令：ab -c 50 -n 1000</span><br></pre></td></tr></table></figure></li>\n<li><p>整体的优化方案</p>\n<ul>\n<li>不同的QPS优化方案 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">100 压力会在数据库 加缓存系统</span><br><span class=\"line\">800 压力会在带宽  cdn加速 负载均衡</span><br><span class=\"line\">1000 缓存如果是memcache就会有压力 页面静态化</span><br><span class=\"line\">2000 文件锁成灾难   业务分离 分布式存储</span><br></pre></td></tr></table></figure></li>\n<li>流量优化<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">防盗链处理 nginx模块支持refer过滤</span><br></pre></td></tr></table></figure></li>\n<li>前端优化<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">减少http请求 css、js文件合并</span><br><span class=\"line\">添加异步请求</span><br><span class=\"line\">启用服务端静态资源压缩 gzip</span><br><span class=\"line\">CDN加速</span><br><span class=\"line\">建立图片服务器</span><br></pre></td></tr></table></figure></li>\n<li>服务端的优化<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">页面静态化</span><br><span class=\"line\">并发处理 队列处理</span><br><span class=\"line\">数据库缓存 memcache redis</span><br><span class=\"line\">分库分表、分区操作 </span><br><span class=\"line\">读写分离</span><br></pre></td></tr></table></figure></li>\n<li>web服务器优化<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">负载均衡</span><br><span class=\"line\">四层协议 lvs</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>动态语言的并发处理</p>\n<ul>\n<li>线程、进程、协程<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">进程是系统资源分配和调度的基本单位</span><br><span class=\"line\">进程的三态模型 多进程在处理器上交替运行，状态不断发生变化</span><br><span class=\"line\">运行、就绪、阻塞</span><br><span class=\"line\">线程是轻量级的进程，是程序执行流的最小单元</span><br><span class=\"line\">线程是进程的一个实体，是cpu调度和分派的基本单位，线程自己不拥有系统资源，和其他同进程的线程共享进程的全部资源</span><br><span class=\"line\">&#96;&#96;&#96;  </span><br><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61864&#x2F;WEBRESOURCE6c901f9f27e1d2739a721c2e5dc3e125)</span><br><span class=\"line\">- 线程和协程的区别  </span><br><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61867&#x2F;WEBRESOURCEeaefad37045e3bed6c33e03574479eb9)</span><br><span class=\"line\">- 多线程、多进程</span><br></pre></td></tr></table></figure>\n//多进程<br>同一个时间里，计算机允许两个或者两个以上的进程处于运行状态<br>进程间通讯 需要借助信号、队列、共享内存<br>//对线程<br>线程就是把一个进程分为很多片，每一片都可以是一个独立的流程<br>多线程共享同一个进程的资源和空间，线程间可以直接通信<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- 同步阻塞模型</span><br></pre></td></tr></table></figure>\n//多进程模型<br>一个请求创建一个进程，循环创建进程，同步阻塞的等待数据返回<br>创建一个socket<br>进入while循环，阻塞在进程accept操作上，等待客户端连接进入主进程在多进程模型下通过fork创建子进程<br>//多线程模型<br>子线程创建成功后进入while循环，阻塞在recv调用上，等待客户端向服务端发送数据<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61897&#x2F;WEBRESOURCE1851153b039a92f599463a847cf5ed5b)</span><br><span class=\"line\">- 异步非阻塞模型</span><br></pre></td></tr></table></figure>\n现在的各种高并发异步IO的服务器程序都是基于epoll实现 比如nginx、golang、nodejs<br>IO复用异步非阻塞程序使用经典的Reactor模型，<br>Reactor顾名思义就是反应堆的意思，它本身不需要处理任何数据的收发。<br>只是可以监视一个socket句柄的时间变化<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61910&#x2F;WEBRESOURCE23f90999e717f20ca0add15ab361d11c)</span><br><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61913&#x2F;WEBRESOURCE668af6a20f80d24dead790e781845e62)</span><br><span class=\"line\">![image.png](http:&#x2F;&#x2F;note.youdao.com&#x2F;yws&#x2F;res&#x2F;61917&#x2F;WEBRESOURCEa8c1f0a59e7dc195a95dd93a59d9cc91)</span><br><span class=\"line\">- php的并发编程</span><br></pre></td></tr></table></figure>\nphp的swoole扩展<br>消息队列<br>  应用解藕 订单 库存 注册 通知<br>  流量削峰 秒杀活动<br>  消息队列的产品<pre><code>  Kafka、ZeroMQ、RabbitMQ、Redis\n</code></pre>\n接口并发请求<br>  curl_multi_init<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    </span><br><span class=\"line\">4. 数据库缓存</span><br></pre></td></tr></table></figure>\nmysql的查询缓存<br>memcache<br>redis<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    </span><br><span class=\"line\">5. mysql数据层优化</span><br></pre></td></tr></table></figure>\n主从复制<br>读写分离<br>双主热备<br>负载均衡<br>  mycat、lvs来实现负载均衡<br>```</li>\n</ul>\n</li>\n</ol>\n","categories":[],"tags":[]},{"title":"我的北漂生活-雨","url":"http://mengyuancc.cn/2018/07/10/life2/","content":"<p>雨越下越大，丝毫没有要停的意思。和同事一块儿傻傻的站在饭店的门口，尽管手里拿着伞，但还是没有勇气走回去，因为雨实在是他娘的 太大了，瓢泼的大雨倾盆而至，丝毫没有考虑北京这座城市的感受。可能夏天的雨就这样吧，在我的印象中，好像夏天的雨也就是这样，小时候，当我和父亲还在收小麦时大雨就来了，完全没有预兆，硬生生的将黄灿灿的小麦拍在了田间。自那以后我对夏雨就有了阴影，没什么好的印象。但今天的雨又显的特别的缠绵。淅淅沥沥的下个不停，并且后劲十足。看来一时半会儿是回不去了，刚吃完晚饭，大家都被堵在了门口回不去，其实我说的饭店是在一个地下商场里，准确来说是一个美食广场，没错我的理解就是个大厦的地下室，门口的地方还是挺宽敞的，以致于很多人被大雨堵在这儿也不显得拥挤。同事教唆我要不要来一发「抽颗烟」，对于这种严重影响他人身体健康的行为，我是拒绝的，但还是不争气的接了过来，点上…  其实我就是这样的变成了一个俗人。<br>算了，换个行吧，不然读起来有种窒息的感觉。其实很早时就有了这个毛病，写东西时老喜欢写完后，自己先读一遍，就像厨师自己做的菜必须先尝一口似的。导致以前写的东西我再拿出来读就几次想要窒息。又扯远了，风渐渐停了！雨变得小了些，和同事商量了个绝佳的方案，因为是三个人，一把伞，决定先让一个人回去拿两把伞，然后再来。很不意外的我变成了拿一把伞的人，带上这个艰巨的任务，我出发了，突然有一种我不入地狱谁入地狱的释然。就这样我踉踉跄跄的走回去，鞋子也湿了，然后踉踉跄跄的跑回来。当我把伞递给同事时，发现雨停了。</p>\n","categories":["我的北漂生活"],"tags":[]},{"title":"about","url":"http://mengyuancc.cn/about/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://mengyuancc.cn/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://mengyuancc.cn/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://mengyuancc.cn/search/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://mengyuancc.cn/category/index.html","content":"","categories":[],"tags":[]}]